<div class="full-background">
  <app-navbar></app-navbar>
  <div class="d-flex flex-row justify-content-center align-items-center">
    <table class="table mt-3 me-5" style="height: 150px; width: 100px">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Foto</th>
          <th scope="col">Nombre</th>
          <th scope="col">Apellido</th>
          <th scope="col">Especialidad</th>
          <th scope="col">Aprobado</th>
        </tr>
      </thead>
      <tbody
        *ngFor="let item of arrEspecialistas; let i = index"
        (click)="autorizarProfesional(item)"
      >
        <tr>
          <th scope="row">{{ i + 1 }}</th>
          <td>
            <img
              src="{{ item.imagenes }}"
              alt="..."
              style="height: 50px; width: 50px"
            />
          </td>
          <td>{{ item.nombre }}</td>
          <td>{{ item.apellido }}</td>
          <td>{{ item.especialidad }}</td>
          <td>{{ item.autorizado ? "Autorizado" : "No autorizado" }}</td>
        </tr>
      </tbody>
    </table>
    <div class="card p-4 shadow mt-3" style="width: 30rem">
      <h2 class="text-center mb-4 mt-1">Formulario de Administrador</h2>
      <form [formGroup]="formRegistro" (ngSubmit)="submit()">
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre:</label>
          <input
            type="text"
            class="form-control"
            id="nombre"
            formControlName="nombre"
          />
          <div
            *ngIf="formRegistro?.get('nombre')?.errors?.['pattern']"
            class="text-danger"
          >
            El nombre solo acepta letras.
          </div>
        </div>
        <div class="mb-3">
          <label for="nombre" class="form-label">Apellido:</label>
          <input
            type="text"
            class="form-control"
            id="apellido"
            formControlName="apellido"
          />
          <div
            *ngIf="formRegistro?.get('apellido')?.errors?.['pattern']"
            class="text-danger"
          >
            El apellido solo acepta letras.
          </div>
        </div>
        <div class="mb-3">
          <label for="edad" class="form-label">Edad:</label>
          <input
            type="number"
            class="form-control"
            id="edad"
            formControlName="edad"
          />
          <div
            *ngIf="
                      formRegistro?.get('edad')?.errors?.['min'] ||
                      formRegistro?.get('edad')?.errors?.['max']
                    "
            class="text-danger"
          >
            La edad debe estar en el rango de 18 a 99.
          </div>
        </div>
        <div class="mb-3">
          <label for="dni" class="form-label">DNI:</label>
          <input
            type="text"
            class="form-control"
            id="dni"
            formControlName="dni"
          />
          <div
            *ngIf="formRegistro.get('dni')?.errors?.['minlength'] || formRegistro.get('dni')?.errors?.['maxlength']"
            class="text-danger"
          >
            El DNI debe tener al menos 8 dígitos.
          </div>
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            class="form-control"
            id="email"
            formControlName="email"
          />
        </div>
        <div
          *ngIf="formRegistro?.get('email')?.errors?.['pattern']"
          class="text-danger"
        >
          ingrese un email valido.
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Contraseña</label>
          <input
            type="password"
            class="form-control"
            id="password"
            formControlName="password"
          />
        </div>

        <div class="d-flex justify-content-center align-items-center">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="!formRegistro?.valid || !savedFileNames.length"
          >
            Guardar datos
          </button>
        </div>
      </form>
    </div>
    <div class="ms-3 card p-4 shadow">
      <label for="imagenes" class="form-label">Imagenes</label>
      <input
        type="file"
        class="form-control"
        id="imagenes"
        accept="image/*"
        formControlName="imagenes"
        (change)="onFileChange($event)"
      />
      <div class="saved-files">
        <h5>Archivos cargados:</h5>
        <ul>
          <li *ngFor="let fileName of savedFileNames" class="text-success">
            {{ fileName.name }}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
