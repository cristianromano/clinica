import{a as K}from"./chunk-UYMU7PDL.js";import{a as X}from"./chunk-KURMSICS.js";import{a as j,c as k,d as R,e as V,f as v,h as B,j as G,k as A,l as H,m as P,n as U,o as z,p as Y,q}from"./chunk-JX2K3NFS.js";import{a as J}from"./chunk-UAHUDWA7.js";import"./chunk-GN3YVZHB.js";import{O as $,u as T}from"./chunk-PLM2N6DR.js";import{c as M,e as O,h as w,l as N}from"./chunk-BWXJFDZ4.js";import{$a as E,Ga as s,Ha as d,Ua as f,Wa as m,Za as t,_a as i,ca as y,d as W,f as _,fb as h,ga as C,jb as S,ob as l,qb as u,wb as x,yb as D,zb as I}from"./chunk-CPSHSAPU.js";var L=W(X());function Z(r,n){if(r&1&&(t(0,"option",19),l(1),i()),r&2){let c=n.$implicit;m("value",c),s(),u(" ",c," ")}}function ee(r,n){if(r&1&&(t(0,"option",20),l(1),i()),r&2){let c=n.$implicit;m("ngValue",c),s(),u(" ",c," ")}}function te(r,n){if(r&1&&(t(0,"li"),l(1),i()),r&2){let c=n.$implicit;s(),u(" ",c.value," ")}}var fe=(()=>{let n=class n{constructor(e,a,o,p){this.route=e,this.firestoreS=a,this.formBuilder=o,this.especilistaS=p,this.auth=y(T),this.fechaSeleccionada=null,this.options=["08:00","09:00","10:00","11:00","12:00","13:00","14:00"],this.especialidades=[],this.formRegistro=new V({horario:this.formBuilder.array([]),especialidades:new v("")})}ngOnInit(){this.route.params.subscribe(e=>{this.firestoreS.obtenerFirestoreUsuario(e.usuarios).then(a=>{this.user=a[0],console.log(this.user.especialidad),this.especialidades=this.user.especialidad})}),this.especilistaS.obtenerEspecialista(this.auth.currentUser?.email).subscribe(e=>{this.id=e[0].id})}get horarios(){return this.formRegistro.get("horario")}minDate(){return new Date().toISOString().split("T")[0]}maxDate(){let e=new Date;return e.setDate(e.getDate()+15),e.toISOString().split("T")[0]}obtenerFechaSeleccionada(e){let a=e.target;this.fechaSeleccionada=a.value}agregarHorario(){if(this.fechaSeleccionada===null){L.default.fire({icon:"error",title:"Oops...",text:"Debes seleccionar una fecha"});return}let e=new Date(this.fechaSeleccionada),a=e.getDate(),o=e.getMonth()+1,p=e.getFullYear(),g=`${a}/${o}/${p}`,b=document.getElementById("horario"),F=b.value,Q=`${g} ${F}`;F&&(this.horarios.push(new v(`${Q} - ${this.formRegistro.get("especialidades")?.value}`)),b.value="",this.fechaSeleccionada=null)}submitForm(){return _(this,null,function*(){this.firestoreS.actualizarHorasEspecialista(this.horarios.value,this.id),this.formRegistro.reset(),this.horarios.clear()})}};n.\u0275fac=function(a){return new(a||n)(d(N),d($),d(z),d(K))},n.\u0275cmp=C({type:n,selectors:[["app-miperfil"]],standalone:!0,features:[x],decls:30,vars:9,consts:[[1,"full-background"],[1,"container-fluid","d-flex","justify-content-evenly","align-items-center"],[1,"card","p-4","shadow","mt-3",2,"width","30rem"],[1,"text-center","mb-4","mt-1"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","fecha"],["type","date","id","fecha","formControlName","fecha",1,"form-control",3,"change","min","max"],["for","horario",1,"form-label"],["id","horario","formControlName","horario",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["id","especialidades","formControlName","especialidades",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","mt-2",3,"click"],[1,"d-flex","flex-column","justify-content-center","allign-items-center"],[1,"mt-5"],["for","horariosSeleccionados"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","mt-3"],[3,"value"],[3,"ngValue"]],template:function(a,o){a&1&&(t(0,"div",0),E(1,"app-navbar"),t(2,"div",1)(3,"div",2)(4,"h2",3),l(5),D(6,"titlecase"),i(),t(7,"form",4),h("ngSubmit",function(){return o.submitForm()}),t(8,"div",5)(9,"label",6),l(10,"Fecha"),i(),t(11,"input",7),h("change",function(g){return o.obtenerFechaSeleccionada(g)}),i(),t(12,"label",8),l(13,"Horario"),i(),t(14,"select",9),f(15,Z,2,2,"option",10),i(),t(16,"label",8),l(17,"Especialidades"),i(),t(18,"select",11),f(19,ee,2,2,"option",12),i(),t(20,"button",13),h("click",function(){return o.agregarHorario()}),l(21," Agregar horario "),i(),t(22,"div",14)(23,"div",15)(24,"label",16),l(25,"Horarios Seleccionados"),i(),t(26,"ul"),f(27,te,2,1,"li",17),i()(),t(28,"button",18),l(29,"Guardar"),i()()()()()()()),a&2&&(s(5),u(" Bienvenido/a ",I(6,7,o.user.nombre),"! "),s(2),m("formGroup",o.formRegistro),s(4),S("min",o.minDate()),S("max",o.maxDate()),s(4),m("ngForOf",o.options),s(4),m("ngForOf",o.especialidades),s(8),m("ngForOf",o.horarios.controls))},dependencies:[w,M,O,q,B,P,U,j,H,k,R,G,A,J,Y],styles:["[_nghost-%COMP%]{display:block;background-image:url(/assets/pattern.jpg)}.full-background[_ngcontent-%COMP%]{width:100vw;height:100vh}"]});let r=n;return r})();export{fe as MiperfilComponent};
