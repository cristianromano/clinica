import{C as D,E as n,F as b,G as h,H as i,I as d,J as m,M as a,N as u,O as s}from"./chunk-IXUCQNA3.js";import{$ as g,V as p}from"./chunk-LTJRTMYM.js";var P=(()=>{let l=class l{constructor(){this.firestore=g(D)}obtenerTurnosEspecialista(e){let t=a(i(this.firestore,"turnos"),s("medicoemail","==",e));return n(t,{idField:"id"})}gestionarTurno(e,t){return u(d(this.firestore,"turnos",e),{estado:t})}gestionarTurnoCancelado(e,t,r){return u(d(this.firestore,"turnos",e),{estado:t,comentario:r})}gestionarTurnoRechazado(e,t,r){return u(d(this.firestore,"turnos",e),{estado:t,comentario:r})}gestionarTurnoAceptado(e,t,r){return u(d(this.firestore,"turnos",e),{estado:t,comentario:r[0],diagnostico:r[1]})}actualizarHorario(e,t,r){let o=[],w=[];for(let c=0;c<r[0].length;c++){let F=Object.values(r[0][c])[0];debugger;F!==t.timestamp&&o.push({[Object.keys(r[0][c])[0]]:Object.values(r[0][c])[0]})}u(d(this.firestore,"profesional",e),{fechas:[...o]})}obtenerEspecialista(e){let t=a(i(this.firestore,"profesional"),s("email","==",e));return n(t,{idField:"id"})}obtenerEspecialistaPorEspecialidad(e){let t=a(i(this.firestore,"profesional"),s("especialidad","==",e));return n(t,{idField:"id"})}obtenerMedicoPorId(e){return m(d(this.firestore,"profesional",e))}ingresarHistoriaClinicaTurnos(e){return u(d(this.firestore,"turnos",e),{historial:!0})}obtenerTurnosTotal(){let e=a(i(this.firestore,"turnos"));return n(e,{idField:"id"})}ingresarHistoralClinico(e,t,r,o){return console.log(o),b(i(this.firestore,"historial"),{idTurno:e,medico:t,paciente:r,historial:{peso:o[0],altura:o[1],presion:o[2],temperatura:o[3],caries:{caries:o[4]}}})}obtenerHistorialClinico(e){let t=a(i(this.firestore,"historial"),s("medico","==",e));return n(t,{idField:"id"})}obtenerTurnoPorId(e){return m(d(this.firestore,"turnos",e))}obtenerUsuarioPorEmail(e){let t=a(i(this.firestore,"usuarios"),s("email","==",e));return n(t,{idField:"id"})}convertDateToTimestamp(e){if(!(e instanceof Date))throw new Error("Invalid Date object");let t=Math.floor(e.getTime()/1e3),r=e.getTime()%1e3*1e6;return{seconds:t,nanoseconds:r}}obtenerTurnosMedicoMes(){let e=new Date().getMonth(),t=new Date(new Date().getFullYear(),e,1),r=new Date(new Date().getFullYear(),e,15),o=a(i(this.firestore,"turnos"),h(s("fechaPedido",">",t),s("fechaPedido","<",r)));return n(o,{idField:"id"})}obtenerTurnosMedicoDosSemanasFinalizados(){let e=new Date().getMonth(),t=new Date(new Date().getFullYear(),e,1),r=new Date(new Date().getFullYear(),e,15),o=a(i(this.firestore,"turnos"),h(s("fechaPedido",">",t),s("fechaPedido","<",r),s("estado","==","realizado")));return n(o,{idField:"id"})}obtenerLogUsuarios(){let e=a(i(this.firestore,"log"));return n(e,{idField:"id"})}};l.\u0275fac=function(t){return new(t||l)},l.\u0275prov=p({token:l,factory:l.\u0275fac,providedIn:"root"});let f=l;return f})();export{P as a};
