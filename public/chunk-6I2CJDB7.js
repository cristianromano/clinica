import{a as P,b as T,c as B}from"./chunk-TAERULIY.js";import{b as L,c as f,d as U,e as F,f as j,g as b,i as z,k as A,l as M,r as N,s as R}from"./chunk-2TE2MQIP.js";import{a as D}from"./chunk-76VRRPFV.js";import{G as S,O as E,Z as C,d as w,f as y,j as I}from"./chunk-FWNJSX6N.js";import{$a as p,Ga as d,Ha as g,Ua as _,Wa as u,Za as t,_a as i,ca as c,d as O,fb as l,ga as k,ob as a,s as v,wb as x}from"./chunk-CPSHSAPU.js";var s=O(R());function q(G,r){G&1&&(t(0,"div",17),a(1," ingrese un email valido. "),i())}var m=class m{constructor(r,n){this.authS=r,this.firestoreS=n,this.router=c(I),this.firestore=c(E),this.auth=c(S),this.formLogin=new j({email:new b("",[f.required,f.pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-z]{2,3}$")]),password:new b("",f.required)})}irRegistro(){this.router.navigate(["/registro"])}submitForm(){this.blockUI.start("Ingresando a la aplicacion...");let r=this.formLogin.get("email")?.value,n=this.formLogin.get("password")?.value;this.formLogin.valid&&r&&n&&this.authS.logueo(r,n).then(e=>{e.tipo=="profesional"?e.validado&&"autorizado"in e&&e.autorizado?(this.blockUI.stop(),s.default.fire({title:"Ingreso exitoso",text:"Bienvenido",icon:"success"}),this.router.navigate(["/home"])):e.validado&&"autorizado"in e&&e.autorizado==!1?(this.blockUI.stop(),s.default.fire({title:"Error",text:"Usuario no autorizado por el administrador",icon:"error"})):(this.blockUI.stop(),s.default.fire({title:"Error",text:"Usuario no validado",icon:"error"})):e.tipo=="administrador"?(this.blockUI.stop(),s.default.fire({title:"Ingreso exitoso",text:"Bienvenido",icon:"success"}),this.router.navigate(["/home"])):e.validado?(this.blockUI.stop(),s.default.fire({title:"Ingreso exitoso",text:"Bienvenido",icon:"success"}),this.router.navigate(["/home"])):(this.blockUI.stop(),s.default.fire({title:"Error",text:"Usuario no validado",icon:"error"}))}).catch(e=>{this.blockUI.stop();let o=this.firebaseErrors(e.code);s.default.fire({title:"Error",text:o,icon:"error"}),console.error("Error:",e)})}loginEspecialista(){this.formLogin.setValue({email:"test-3aip0nmqr@srv1.mail-tester.com",password:"asdasd123"})}loginPaciente(){this.formLogin.setValue({email:"test-pootof6dt@srv1.mail-tester.com",password:"asdasd123"})}loginAdmin(){this.formLogin.setValue({email:"cristianromano2@gmail.com",password:"asdasd123"})}firebaseErrors(r){switch(r){case"auth/email-already-in-use":return"Direcci\xF3n de correo electr\xF3nico en uso.";case"auth/weak-password":return"contrase\xF1a debil ingrese una mas segura.";case"auth/user-not-found":return"Usuario no encontrado.";case"auth/invalid-credential":return"Credenciales invalidas.";default:return"Ocurri\xF3 un error. Por favor, int\xE9ntelo nuevamente m\xE1s tarde."}}};m.\u0275fac=function(n){return new(n||m)(g(D),g(C))},m.\u0275cmp=k({type:m,selectors:[["app-login"]],standalone:!0,features:[x],decls:27,vars:3,consts:[[1,"full-background","d-flex","justify-content-center","align-items-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"card","p-4","shadow","mt-3",2,"width","30rem","height","30rem"],["src","/assets/logo.png","alt","","srcset","",1,"mx-auto","d-block","mb-4",2,"height","50px","width","50px"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["class","text-danger","style","padding: 10px; border-radius: 5px; background-color: #f8d7da",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-success","ms-3",3,"click"],[1,"d-flex","justify-content-evenly","align-items-center","mt-5",2,"border","1px solid black","border-radius","5px","padding","10px","background-color","#f8d7da"],["type","button",1,"btn","btn-danger",2,"padding","10px",3,"click"],["type","button",1,"btn","btn","btn-danger","ms-3",2,"padding","10px",3,"click"],[1,"text-danger",2,"padding","10px","border-radius","5px","background-color","#f8d7da"]],template:function(n,e){if(n&1&&(t(0,"block-ui")(1,"div",0)(2,"div",1)(3,"div",2),p(4,"img",3),t(5,"form",4),l("ngSubmit",function(){return e.submitForm()}),t(6,"div",5)(7,"label",6),a(8,"Email"),i(),p(9,"input",7),i(),_(10,q,2,0,"div",8),t(11,"div",5)(12,"label",9),a(13,"Contrase\xF1a"),i(),p(14,"input",10),i(),t(15,"div",11)(16,"button",12),a(17," Ingresar "),i(),t(18,"button",13),l("click",function(){return e.irRegistro()}),a(19," Ir a registro "),i()(),t(20,"div",14)(21,"button",15),l("click",function(){return e.loginEspecialista()}),a(22," Especialista "),i(),t(23,"button",16),l("click",function(){return e.loginPaciente()}),a(24," Paciente "),i(),t(25,"button",16),l("click",function(){return e.loginAdmin()}),a(26," Administrador "),i()()()()()()()),n&2){let o;d(5),u("formGroup",e.formLogin),d(5),u("ngIf",e.formLogin==null||(o=e.formLogin.get("email"))==null||o.errors==null?null:o.errors.pattern),d(6),u("disabled",!(e.formLogin!=null&&e.formLogin.valid))}},dependencies:[y,w,N,z,L,U,F,A,M,T,P],styles:["[_nghost-%COMP%]{display:block;background-image:url(/assets/pattern.jpg)}.full-background[_ngcontent-%COMP%]{width:100vw;height:100vh}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px}"]});var h=m;v([B()],h.prototype,"blockUI",void 0);export{h as LoginComponent};
