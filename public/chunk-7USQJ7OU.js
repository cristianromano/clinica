import{a as Y,c as ee,e as te,f as ie}from"./chunk-JYAU4QYE.js";import{b as M,c as d,d as Z,e as $,f as L,g as b,i as U,j as H,k as J,l as K,p as Q,r as W}from"./chunk-44CDRYNA.js";import{a as le}from"./chunk-PAPPUINV.js";import{a as X}from"./chunk-OHKK36NU.js";import{U as G,b as B,c as V,d as j,e as q}from"./chunk-ORWQQMWF.js";import{$a as f,Da as y,Ga as l,Ha as C,Ua as g,Wa as p,Za as t,_a as e,ab as z,bb as E,ca as w,cb as T,d as oe,f as _,fb as F,ga as A,ja as N,jb as i,kb as c,lb as P,qa as I,qb as O,ra as R,sb as k,tb as D}from"./chunk-WIFXGSG2.js";var re=oe(le());var ne=(()=>{let o=class o{transform(a){return a?"table-success":"table-danger"}};o.\u0275fac=function(m){return new(m||o)},o.\u0275pipe=N({name:"colores",type:o,pure:!0,standalone:!0});let r=o;return r})();function me(r,o){if(r&1&&(t(0,"tbody")(1,"tr")(2,"th",30),i(3),e(),t(4,"td"),f(5,"img",31),e(),t(6,"td"),i(7),e(),t(8,"td"),i(9),e(),t(10,"td"),i(11),e(),t(12,"td"),i(13),e()()()),r&2){let s=o.$implicit,a=o.index;l(3),c(a+1),l(2),F("src",s.imagenes,y),l(2),c(s.nombre),l(2),c(s.apellido),l(2),c(s.obrasocial),l(2),c(s.autorizado?"Autorizado":"No autorizado")}}function se(r,o){if(r&1){let s=z();t(0,"tbody",32),E("click",function(){let m=I(s).$implicit,n=T();return R(n.autorizarProfesional(m))}),t(1,"tr",33),k(2,"colores"),t(3,"th",30),i(4),e(),t(5,"td"),f(6,"img",31),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td"),i(14),e()()()}if(r&2){let s=o.$implicit,a=o.index;l(),p("ngClass",D(2,7,s.autorizado)),l(3),c(a+1),l(2),F("src",s.imagenes,y),l(2),c(s.nombre),l(2),c(s.apellido),l(2),c(s.especialidad),l(2),c(s.autorizado?"Autorizado":"No autorizado")}}function de(r,o){r&1&&(t(0,"div",34),i(1," El nombre solo acepta letras. "),e())}function pe(r,o){r&1&&(t(0,"div",34),i(1," El apellido solo acepta letras. "),e())}function ce(r,o){r&1&&(t(0,"div",34),i(1," La edad debe estar en el rango de 18 a 99. "),e())}function ue(r,o){r&1&&(t(0,"div",34),i(1," El DNI debe tener al menos 8 d\xEDgitos. "),e())}function fe(r,o){r&1&&(t(0,"div",34),i(1," ingrese un email valido. "),e())}function ge(r,o){if(r&1&&(t(0,"li",35),i(1),e()),r&2){let s=o.$implicit;l(),P(" ",s.name," ")}}var Ae=(()=>{let o=class o{constructor(a,m){this.firestoreS=a,this.formBuilder=m,this.arrEspecialistas=[],this.arrPacientes=[],this.savedFileNames=[],this.storage=w(Y),this.formRegistro=new L({nombre:new b("",[d.required,d.pattern("[a-zA-Z ]*")]),apellido:new b("",[d.required,d.pattern("[a-zA-Z ]*")]),edad:new b("",[d.required,d.pattern("[0-9]*"),d.min(18),d.max(99)]),dni:new b("",[d.required,d.minLength(8),d.maxLength(8)]),email:new b("",[d.required,d.pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}")]),password:new b("",[d.required]),imagenes:this.formBuilder.array([])})}ngOnInit(){this.firestoreS.obtenerFirestoreTodosProfesional().subscribe(a=>{this.arrEspecialistas=[],a.forEach(m=>{this.arrEspecialistas.push(m)})}),this.firestoreS.obtenerFirestoreTodosPacientes().subscribe(a=>{this.arrPacientes=[],a.forEach(m=>{this.arrPacientes.push(m)})})}autorizarProfesional(a){this.firestoreS.autorizarProfesional(a)}submit(){return _(this,null,function*(){let a=this.formRegistro.get("imagenes"),m=[];for(let n of a.controls)if(n.value!==""){let u=te(this.storage,`imagenes/${n.value.name}`);yield ie(u,n.value).then(h=>_(this,null,function*(){m.push(yield ee(h.ref)),this.firestoreS.agregarFirestoreAdministrador(this.formRegistro,m).then(v=>{this.formRegistro.reset(),this.savedFileNames=[],re.default.fire({title:"Registro exitoso",text:"Se ha registrado correctamente",icon:"success",confirmButtonText:"Aceptar"})})}))}})}onFileChange(a){let m=a.target.files;if(m&&m.length>0){let n=this.formRegistro.get("imagenes");n.clear();let u=m[0];this.savedFileNames=[{name:u.name}],n.push(this.formBuilder.control(u))}}};o.\u0275fac=function(m){return new(m||o)(C(G),C(Q))},o.\u0275cmp=A({type:o,selectors:[["app-administracion"]],standalone:!0,features:[O],decls:80,vars:10,consts:[[1,"full-background"],[1,"d-flex","flex-row","justify-content-center","align-items-center"],[1,"table","mt-3","me-5","table-secondary",2,"height","150px","width","100px"],["scope","col"],[4,"ngFor","ngForOf"],[1,"table","mt-3","me-5",2,"height","150px","width","100px"],[3,"click",4,"ngFor","ngForOf"],[1,"card","p-4","shadow","mt-3",2,"width","30rem"],[1,"text-center","mb-4","mt-1"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"ms-3","card","p-4","shadow"],["for","imagenes",1,"form-label"],["type","file","id","imagenes","accept","image/*","formControlName","imagenes",1,"form-control",3,"change"],[1,"saved-files"],["class","text-success",4,"ngFor","ngForOf"],["scope","row"],["alt","...",2,"height","50px","width","50px",3,"src"],[3,"click"],[3,"ngClass"],[1,"text-danger"],[1,"text-success"]],template:function(m,n){if(m&1&&(t(0,"div",0),f(1,"app-navbar"),t(2,"div",1)(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),i(7,"#"),e(),t(8,"th",3),i(9,"Foto"),e(),t(10,"th",3),i(11,"Nombre"),e(),t(12,"th",3),i(13,"Apellido"),e(),t(14,"th",3),i(15,"Obra social"),e(),t(16,"th",3),i(17,"Aprobado"),e()()(),g(18,me,14,6,"tbody",4),e(),t(19,"table",5)(20,"thead")(21,"tr")(22,"th",3),i(23,"#"),e(),t(24,"th",3),i(25,"Foto"),e(),t(26,"th",3),i(27,"Nombre"),e(),t(28,"th",3),i(29,"Apellido"),e(),t(30,"th",3),i(31,"Especialidad"),e(),t(32,"th",3),i(33,"Aprobado"),e()()(),g(34,se,15,9,"tbody",6),e(),t(35,"div",7)(36,"h2",8),i(37,"Formulario de Administrador"),e(),t(38,"form",9),E("ngSubmit",function(){return n.submit()}),t(39,"div",10)(40,"label",11),i(41,"Nombre:"),e(),f(42,"input",12),g(43,de,2,0,"div",13),e(),t(44,"div",10)(45,"label",11),i(46,"Apellido:"),e(),f(47,"input",14),g(48,pe,2,0,"div",13),e(),t(49,"div",10)(50,"label",15),i(51,"Edad:"),e(),f(52,"input",16),g(53,ce,2,0,"div",13),e(),t(54,"div",10)(55,"label",17),i(56,"DNI:"),e(),f(57,"input",18),g(58,ue,2,0,"div",13),e(),t(59,"div",10)(60,"label",19),i(61,"Email"),e(),f(62,"input",20),e(),g(63,fe,2,0,"div",13),t(64,"div",10)(65,"label",21),i(66,"Contrase\xF1a"),e(),f(67,"input",22),e(),t(68,"div",23)(69,"button",24),i(70," Guardar datos "),e()()()(),t(71,"div",25)(72,"label",26),i(73,"Imagenes"),e(),t(74,"input",27),E("change",function(h){return n.onFileChange(h)}),e(),t(75,"div",28)(76,"h5"),i(77,"Archivos cargados:"),e(),t(78,"ul"),g(79,ge,2,1,"li",29),e()()()()()),m&2){let u,h,v,x,S;l(18),p("ngForOf",n.arrPacientes),l(16),p("ngForOf",n.arrEspecialistas),l(4),p("formGroup",n.formRegistro),l(5),p("ngIf",n.formRegistro==null||(u=n.formRegistro.get("nombre"))==null||u.errors==null?null:u.errors.pattern),l(5),p("ngIf",n.formRegistro==null||(h=n.formRegistro.get("apellido"))==null||h.errors==null?null:h.errors.pattern),l(5),p("ngIf",(n.formRegistro==null||(v=n.formRegistro.get("edad"))==null||v.errors==null?null:v.errors.min)||(n.formRegistro==null||(v=n.formRegistro.get("edad"))==null||v.errors==null?null:v.errors.max)),l(5),p("ngIf",((x=n.formRegistro.get("dni"))==null||x.errors==null?null:x.errors.minlength)||((x=n.formRegistro.get("dni"))==null||x.errors==null?null:x.errors.maxlength)),l(5),p("ngIf",n.formRegistro==null||(S=n.formRegistro.get("email"))==null||S.errors==null?null:S.errors.pattern),l(6),p("disabled",!(n.formRegistro!=null&&n.formRegistro.valid)||!n.savedFileNames.length),l(10),p("ngForOf",n.savedFileNames)}},dependencies:[X,q,B,V,j,W,U,M,H,Z,$,J,K,ne],styles:[".full-background[_ngcontent-%COMP%]{width:100vw;height:100vh}[_nghost-%COMP%]{display:block;background-image:url(/assets/pattern.jpg)}"]});let r=o;return r})();export{Ae as AdministracionComponent};
