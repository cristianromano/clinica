import{a as ee,c as te,e as ie,f as ne}from"./chunk-5JGJFHZR.js";import{b as Z,c as d,d as $,e as L,f as U,g as S,i as H,j as J,k as K,l as Q,p as W,r as X}from"./chunk-4DSXN4JZ.js";import{a as le}from"./chunk-PAPPUINV.js";import{a as Y}from"./chunk-S24AL736.js";import{P as G,Q as M,b as j,c as B,d as V,e as q}from"./chunk-XGQUN4LM.js";import{$a as g,Da as C,Ga as a,Ha as E,Ua as h,Wa as p,Za as t,_a as e,ab as z,bb as _,ca as w,cb as T,d as ae,f as y,fb as F,ga as A,ja as N,jb as i,kb as u,lb as P,qa as R,qb as O,ra as I,sb as k,tb as D}from"./chunk-WIFXGSG2.js";var oe=ae(le());var re=(()=>{let o=class o{transform(m){return m?"table-success":"table-danger"}};o.\u0275fac=function(l){return new(l||o)},o.\u0275pipe=N({name:"colores",type:o,pure:!0,standalone:!0});let r=o;return r})();function se(r,o){if(r&1&&(t(0,"tbody")(1,"tr")(2,"th",30),i(3),e(),t(4,"td"),g(5,"img",31),e(),t(6,"td"),i(7),e(),t(8,"td"),i(9),e(),t(10,"td"),i(11),e(),t(12,"td"),i(13),e()()()),r&2){let s=o.$implicit,m=o.index;a(3),u(m+1),a(2),F("src",s.imagenes,C),a(2),u(s.nombre),a(2),u(s.apellido),a(2),u(s.obrasocial),a(2),u(s.autorizado?"Autorizado":"No autorizado")}}function de(r,o){if(r&1){let s=z();t(0,"tbody",32),_("click",function(){let l=R(s).$implicit,n=T();return I(n.autorizarProfesional(l))}),t(1,"tr",33),k(2,"colores"),t(3,"th",30),i(4),e(),t(5,"td"),g(6,"img",31),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td"),i(14),e()()()}if(r&2){let s=o.$implicit,m=o.index;a(),p("ngClass",D(2,7,s.autorizado)),a(3),u(m+1),a(2),F("src",s.imagenes,C),a(2),u(s.nombre),a(2),u(s.apellido),a(2),u(s.especialidad),a(2),u(s.autorizado?"Autorizado":"No autorizado")}}function pe(r,o){r&1&&(t(0,"div",34),i(1," El nombre solo acepta letras. "),e())}function ce(r,o){r&1&&(t(0,"div",34),i(1," El apellido solo acepta letras. "),e())}function ue(r,o){r&1&&(t(0,"div",34),i(1," La edad debe estar en el rango de 18 a 99. "),e())}function fe(r,o){r&1&&(t(0,"div",34),i(1," El DNI debe tener al menos 8 d\xEDgitos. "),e())}function ge(r,o){r&1&&(t(0,"div",34),i(1," ingrese un email valido. "),e())}function he(r,o){if(r&1&&(t(0,"li",35),i(1),e()),r&2){let s=o.$implicit;a(),P(" ",s.name," ")}}var ze=(()=>{let o=class o{constructor(m,l,n){this.firestoreS=m,this.formBuilder=l,this.authS=n,this.arrEspecialistas=[],this.arrPacientes=[],this.savedFileNames=[],this.storage=w(ee),this.formRegistro=new U({nombre:new S("",[d.required,d.pattern("[a-zA-Z ]*")]),apellido:new S("",[d.required,d.pattern("[a-zA-Z ]*")]),edad:new S("",[d.required,d.pattern("[0-9]*"),d.min(18),d.max(99)]),dni:new S("",[d.required,d.minLength(8),d.maxLength(8)]),email:new S("",[d.required,d.pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}")]),password:new S("",[d.required]),imagenes:this.formBuilder.array([])})}ngOnInit(){this.firestoreS.obtenerFirestoreTodosProfesional().subscribe(m=>{this.arrEspecialistas=[],m.forEach(l=>{this.arrEspecialistas.push(l)})}),this.firestoreS.obtenerFirestoreTodosPacientes().subscribe(m=>{this.arrPacientes=[],m.forEach(l=>{this.arrPacientes.push(l)})})}autorizarProfesional(m){this.firestoreS.autorizarProfesional(m)}submit(){return y(this,null,function*(){let m=this.formRegistro.get("imagenes"),l=[],n=this.formRegistro.value.nombre,c=this.formRegistro.value.email,v=this.formRegistro.value.password;for(let f of m.controls)if(f.value!==""){let b=ie(this.storage,`imagenes/${f.value.name}`);yield ne(b,f.value).then(x=>y(this,null,function*(){l.push(yield te(x.ref)),this.firestoreS.agregarFirestoreAdministrador(this.formRegistro,l).then(ve=>{n&&c&&v&&this.authS.crearUsuario(c,v,l[0],n).then(be=>{this.formRegistro.reset(),this.savedFileNames=[],oe.default.fire({title:"Registro exitoso",text:"Se ha registrado correctamente",icon:"success",confirmButtonText:"Aceptar"})})})}))}})}onFileChange(m){let l=m.target.files;if(l&&l.length>0){let n=this.formRegistro.get("imagenes");n.clear();let c=l[0];this.savedFileNames=[{name:c.name}],n.push(this.formBuilder.control(c))}}};o.\u0275fac=function(l){return new(l||o)(E(G),E(W),E(M))},o.\u0275cmp=A({type:o,selectors:[["app-administracion"]],standalone:!0,features:[O],decls:80,vars:10,consts:[[1,"full-background"],[1,"d-flex","flex-row","justify-content-center","align-items-center"],[1,"table","mt-3","me-5","table-secondary",2,"height","150px","width","100px"],["scope","col"],[4,"ngFor","ngForOf"],[1,"table","mt-3","me-5",2,"height","150px","width","100px"],[3,"click",4,"ngFor","ngForOf"],[1,"card","p-4","shadow","mt-3",2,"width","30rem"],[1,"text-center","mb-4","mt-1"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"ms-3","card","p-4","shadow"],["for","imagenes",1,"form-label"],["type","file","id","imagenes","accept","image/*","formControlName","imagenes",1,"form-control",3,"change"],[1,"saved-files"],["class","text-success",4,"ngFor","ngForOf"],["scope","row"],["alt","...",2,"height","50px","width","50px",3,"src"],[3,"click"],[3,"ngClass"],[1,"text-danger"],[1,"text-success"]],template:function(l,n){if(l&1&&(t(0,"div",0),g(1,"app-navbar"),t(2,"div",1)(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),i(7,"#"),e(),t(8,"th",3),i(9,"Foto"),e(),t(10,"th",3),i(11,"Nombre"),e(),t(12,"th",3),i(13,"Apellido"),e(),t(14,"th",3),i(15,"Obra social"),e(),t(16,"th",3),i(17,"Aprobado"),e()()(),h(18,se,14,6,"tbody",4),e(),t(19,"table",5)(20,"thead")(21,"tr")(22,"th",3),i(23,"#"),e(),t(24,"th",3),i(25,"Foto"),e(),t(26,"th",3),i(27,"Nombre"),e(),t(28,"th",3),i(29,"Apellido"),e(),t(30,"th",3),i(31,"Especialidad"),e(),t(32,"th",3),i(33,"Aprobado"),e()()(),h(34,de,15,9,"tbody",6),e(),t(35,"div",7)(36,"h2",8),i(37,"Formulario de Administrador"),e(),t(38,"form",9),_("ngSubmit",function(){return n.submit()}),t(39,"div",10)(40,"label",11),i(41,"Nombre:"),e(),g(42,"input",12),h(43,pe,2,0,"div",13),e(),t(44,"div",10)(45,"label",11),i(46,"Apellido:"),e(),g(47,"input",14),h(48,ce,2,0,"div",13),e(),t(49,"div",10)(50,"label",15),i(51,"Edad:"),e(),g(52,"input",16),h(53,ue,2,0,"div",13),e(),t(54,"div",10)(55,"label",17),i(56,"DNI:"),e(),g(57,"input",18),h(58,fe,2,0,"div",13),e(),t(59,"div",10)(60,"label",19),i(61,"Email"),e(),g(62,"input",20),e(),h(63,ge,2,0,"div",13),t(64,"div",10)(65,"label",21),i(66,"Contrase\xF1a"),e(),g(67,"input",22),e(),t(68,"div",23)(69,"button",24),i(70," Guardar datos "),e()()()(),t(71,"div",25)(72,"label",26),i(73,"Imagenes"),e(),t(74,"input",27),_("change",function(v){return n.onFileChange(v)}),e(),t(75,"div",28)(76,"h5"),i(77,"Archivos cargados:"),e(),t(78,"ul"),h(79,he,2,1,"li",29),e()()()()()),l&2){let c,v,f,b,x;a(18),p("ngForOf",n.arrPacientes),a(16),p("ngForOf",n.arrEspecialistas),a(4),p("formGroup",n.formRegistro),a(5),p("ngIf",n.formRegistro==null||(c=n.formRegistro.get("nombre"))==null||c.errors==null?null:c.errors.pattern),a(5),p("ngIf",n.formRegistro==null||(v=n.formRegistro.get("apellido"))==null||v.errors==null?null:v.errors.pattern),a(5),p("ngIf",(n.formRegistro==null||(f=n.formRegistro.get("edad"))==null||f.errors==null?null:f.errors.min)||(n.formRegistro==null||(f=n.formRegistro.get("edad"))==null||f.errors==null?null:f.errors.max)),a(5),p("ngIf",((b=n.formRegistro.get("dni"))==null||b.errors==null?null:b.errors.minlength)||((b=n.formRegistro.get("dni"))==null||b.errors==null?null:b.errors.maxlength)),a(5),p("ngIf",n.formRegistro==null||(x=n.formRegistro.get("email"))==null||x.errors==null?null:x.errors.pattern),a(6),p("disabled",!(n.formRegistro!=null&&n.formRegistro.valid)||!n.savedFileNames.length),a(10),p("ngForOf",n.savedFileNames)}},dependencies:[Y,q,j,B,V,X,H,Z,J,$,L,K,Q,re],styles:[".full-background[_ngcontent-%COMP%]{width:100vw;height:100vh}[_nghost-%COMP%]{display:block;background-image:url(/assets/pattern.jpg)}"]});let r=o;return r})();export{ze as AdministracionComponent};
