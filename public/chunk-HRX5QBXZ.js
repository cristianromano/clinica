import{a as X}from"./chunk-RLNOM6ZC.js";import{a as J,b as K}from"./chunk-6ZRPZ7NW.js";import{a as L}from"./chunk-L7GHGVGE.js";import{a as Q,b as U,c as G}from"./chunk-V4624JQ6.js";import{a as ee}from"./chunk-7VGHOT3T.js";import{a as q,c as D,g as N,p as j,q as $}from"./chunk-IDY3ZXSF.js";import{a as R}from"./chunk-WJSC7PN5.js";import{a as W}from"./chunk-RBADOQRF.js";import"./chunk-IXUCQNA3.js";import{c as F,d as O,h as A,j as H}from"./chunk-YW5BT2SR.js";import{Ab as M,Bb as k,Db as V,Fb as z,Ha as l,Hb as h,Ia as y,Ib as E,Jb as v,Wa as T,Ya as C,cb as n,da as w,db as a,eb as S,ib as P,lb as m,mb as g,na as u,oa as f,vb as o,wb as _,xb as B,zb as I}from"./chunk-LTJRTMYM.js";import{e as Z,g as b}from"./chunk-5G567QLT.js";var r=Z(ee());var te=p=>({itemsPerPage:5,currentPage:p,id:"profesionales"});function ie(p,c){if(p&1){let s=P();n(0,"tbody")(1,"tr",10),h(2,"coloresturnos"),n(3,"th",11),o(4),a(),n(5,"td",12),m("click",function(){let e=u(s).$implicit,i=g();return f(i.gestionarTurno(e))}),o(6),a(),n(7,"td",12),m("click",function(){let e=u(s).$implicit,i=g();return f(i.gestionarTurno(e))}),o(8),a(),n(9,"td",12),m("click",function(){let e=u(s).$implicit,i=g();return f(i.gestionarTurno(e))}),o(10),h(11,"convertirfecha"),h(12,"date"),a(),n(13,"td",12),m("click",function(){let e=u(s).$implicit,i=g();return f(i.gestionarTurno(e))}),o(14),a(),n(15,"td")(16,"button",13),m("click",function(){let e=u(s).$implicit,i=g();return f(i.agregarHistorialClinico(e))}),o(17," Agregar "),a()()()()}if(p&2){let s=c.$implicit,t=c.index;l(),C("ngClass",E(2,7,s.estado)),l(3),_(t+1),l(2),_(s.paciente),l(2),_(s.especialidad),l(2),B(" ",v(12,11,E(11,9,s.hora),"shortTime")," "),l(4),_(s.estado),l(2),C("disabled",s.estado!=="realizado"||s.historial!==!1)}}var he=(()=>{let c=class c{constructor(t,e){this.especialistaService=t,this.authService=e,this.arrTurnos=[],this.p=1,this.searchEspecialista=""}ngOnInit(){this.especialistaService.obtenerTurnosEspecialista(this.authService.getUser()?.email).subscribe(t=>{this.arrTurnos=[],t.forEach(e=>{this.arrTurnos.push(e)})})}gestionarTurno(t){return b(this,null,function*(){if(t.estado==="cancelado"){r.default.fire("Turno ya cancelado","","info");return}if(t.estado==="rechazado"){r.default.fire("Turno ya rechazado","","info");return}if(t.estado==="realizado"||t.reseniaOk===!0){if(t.resenia==null){r.default.fire("No hay rese\xF1a por el momento","","info");return}r.default.fire(`${t.resenia}`,"","info");return}t.estado==="aceptado"&&r.default.fire({showCloseButton:!0,title:"Ingrese diagnostico y el comentario",html:`<input id="input1" class="swal2-input" placeholder="Comentario" required>' 
          <textarea  id="textarea1" class="swal2-textarea" style="resize: none;width:350px;" placeholder="Ingrese diagnostico" required></textarea>`,focusConfirm:!1,preConfirm:()=>{let e=document.getElementById("input1").value,i=document.getElementById("textarea1").value;return(!e||!i)&&r.default.showValidationMessage("Ingrese texto en ambos campos"),[i,e]}}).then(e=>{e.isConfirmed&&(this.especialistaService.gestionarTurnoAceptado(t.id,"realizado",e.value),r.default.fire({title:"Turno realizado",icon:"success"}))}),t.estado==="abierto"&&r.default.fire({title:"\xBFQue desea hacer?",showCloseButton:!0,showDenyButton:!0,showCancelButton:!0,cancelButtonText:"Rechazar turno",confirmButtonText:"Aceptar turno",denyButtonText:"Cancelar turno"}).then(e=>{e.isConfirmed?this.especialistaService.gestionarTurno(t.id,"aceptado"):e.isDenied?r.default.fire({title:"Motivo de cancelaci\xF3n",input:"text",confirmButtonText:"Aceptar",showCancelButton:!0}).then(i=>{i.isConfirmed&&this.especialistaService.gestionarTurnoCancelado(t.id,"cancelado",i.value)}):e.isDismissed&&r.default.fire({title:"Motivo de rechazo de turno",input:"text",confirmButtonText:"Aceptar",showCancelButton:!0}).then(i=>{i.isConfirmed&&this.especialistaService.gestionarTurnoCancelado(t.id,"rechazado",i.value)})})})}agregarHistorialClinico(t){if(t.historial===!0){r.default.fire("Historial clinico ya ingresado","","info");return}r.default.fire({showCloseButton:!0,title:"Ingrese datos del paciente",html:`<input id="input1" type="number" class="swal2-input" min="0" max="180" placeholder="Altura" required> 
        <input  id="input2" type="number" class="swal2-input" placeholder="Peso" min="0" max="380" required>
        <input  id="input3" type="number" class="swal2-input" min="0" max="60" placeholder="Presi\xF3n" required>
        <input  id="input4"type="number"  class="swal2-input" min="0" max="48" placeholder="Temperatura" required>
      
        <input  id="input5" type="number" class="swal2-input" placeholder="Caries" min="0" max="10" >`,focusConfirm:!1,preConfirm:()=>{let e=document.getElementById("input1").value,i=document.getElementById("input2").value,x=document.getElementById("input3").value,d=document.getElementById("input4").value,Y=document.getElementById("input5").value;return(!e||!i||!x||!d)&&r.default.showValidationMessage("Ingrese texto requerido"),[i,e,x,d,Y]}}).then(e=>{e.isConfirmed&&this.especialistaService.ingresarHistoriaClinicaTurnos(t.id).then(()=>this.especialistaService.ingresarHistoralClinico(t.id,t.medicoid,t.paciente,e?.value).then(()=>{r.default.fire({title:"Historial clinico ingresado",icon:"success"})}))})}};c.\u0275fac=function(e){return new(e||c)(y(L),y(W))},c.\u0275cmp=w({type:c,selectors:[["app-especialista-panel"]],standalone:!0,features:[V],decls:28,vars:10,consts:[[1,"full-background"],[1,"d-flex","flex-row","justify-content-center","align-items-center"],[1,"d-flex","flex-column","justify-content-center","align-items-center","panelusuarios"],[1,"d-flex","flex-column","justify-content-center","align-items","mt-3"],[1,"mt-1","mb-1"],["type","text","placeholder","Buscar profesional",1,"form-control",3,"ngModelChange","ngModel"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["id","profesionales",1,"my-pagination",3,"pageChange"],[3,"ngClass"],["scope","row"],[3,"click"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(n(0,"div",0),S(1,"app-navbar"),n(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4"),o(6,"Buscar por Paciente/Especialidad"),a(),n(7,"div",4)(8,"input",5),k("ngModelChange",function(d){return M(i.searchEspecialista,d)||(i.searchEspecialista=d),d}),a()()(),n(9,"table",6)(10,"thead")(11,"tr")(12,"th",7),o(13,"#"),a(),n(14,"th",7),o(15,"Paciente"),a(),n(16,"th",7),o(17,"Especialidad"),a(),n(18,"th",7),o(19,"Hora"),a(),n(20,"th",7),o(21,"Estado"),a(),n(22,"th",7),o(23,"Historial Clinico"),a()()(),T(24,ie,18,14,"tbody",8),h(25,"filtro"),h(26,"paginate"),a(),n(27,"pagination-controls",9),m("pageChange",function(d){return i.p=d}),a()()()()),e&2&&(l(8),I("ngModel",i.searchEspecialista),l(16),C("ngForOf",v(26,5,v(25,2,i.arrTurnos,i.searchEspecialista),z(8,te,i.p))))},dependencies:[H,F,O,A,R,G,Q,U,j,q,D,N,J,$,K,X],styles:[".full-background[_ngcontent-%COMP%]{width:100vw;height:100vh}[_nghost-%COMP%]{display:block;background-image:url(/assets/pattern.jpg)}.panelusuarios[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #e9ecef;border-radius:5px;margin-top:10px;padding:50px;background-color:#faebd7;cursor:pointer}.table[_ngcontent-%COMP%]{width:500px}"]});let p=c;return p})();export{he as EspecialistaPanelComponent};
