import{a as ie,c as ne,e as re,f as oe}from"./chunk-JHUPRWQY.js";import{a as ae,b as le,c as me}from"./chunk-4HYHKJJI.js";import{a as ce}from"./chunk-KURMSICS.js";import{a as Z,b as d,c as $,d as L,e as H,f as x,h as J,i as K,j as Q,k as W,o as X,q as Y}from"./chunk-GU6MDCDW.js";import{a as te}from"./chunk-H3WQR7VF.js";import{a as ee}from"./chunk-HECTSUKL.js";import{N as U}from"./chunk-AON64UGK.js";import{b as M,c as V,d as q,f as G}from"./chunk-CHILJPBX.js";import{$a as g,Ab as N,Da as w,Ga as a,Ha as E,Ua as b,Wa as u,Za as t,_a as e,ca as R,cb as O,d as pe,f as C,fb as _,ga as I,gb as k,ja as P,jb as F,ob as i,pb as h,qa as T,qb as B,ra as z,wb as j,xb as A,yb as y,zb as D}from"./chunk-CPSHSAPU.js";var de=pe(ce());var se=(()=>{let o=class o{transform(m){return m?"table-success":"table-danger"}};o.\u0275fac=function(l){return new(l||o)},o.\u0275pipe=P({name:"colores",type:o,pure:!0,standalone:!0});let r=o;return r})();var fe=r=>({itemsPerPage:3,currentPage:r,id:"tableOne"}),ge=r=>({itemsPerPage:2,currentPage:r,id:"tableTwo"});function he(r,o){if(r&1&&(t(0,"tbody")(1,"tr")(2,"th",34),i(3),e(),t(4,"td"),g(5,"img",35),e(),t(6,"td"),i(7),e(),t(8,"td"),i(9),e(),t(10,"td"),i(11),e()()()),r&2){let s=o.$implicit,m=o.index;a(3),h(m+1),a(2),F("src",s.imagenes,w),a(2),h(s.nombre),a(2),h(s.apellido),a(2),h(s.obrasocial)}}function be(r,o){if(r&1){let s=O();t(0,"tbody",36),_("click",function(){let l=T(s).$implicit,n=k();return z(n.autorizarProfesional(l))}),t(1,"tr",37),y(2,"colores"),t(3,"th",34),i(4),e(),t(5,"td"),g(6,"img",35),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td"),i(14),e()()()}if(r&2){let s=o.$implicit,m=o.index;a(),u("ngClass",D(2,7,s.autorizado)),a(3),h(m+1),a(2),F("src",s.imagenes,w),a(2),h(s.nombre),a(2),h(s.apellido),a(2),h(s.especialidad),a(2),h(s.autorizado?"Autorizado":"No autorizado")}}function ve(r,o){r&1&&(t(0,"div",38),i(1," El nombre solo acepta letras. "),e())}function xe(r,o){r&1&&(t(0,"div",38),i(1," El apellido solo acepta letras. "),e())}function _e(r,o){r&1&&(t(0,"div",38),i(1," La edad debe estar en el rango de 18 a 99. "),e())}function Se(r,o){r&1&&(t(0,"div",38),i(1," El DNI debe tener al menos 8 d\xEDgitos. "),e())}function Ee(r,o){r&1&&(t(0,"div",38),i(1," ingrese un email valido. "),e())}function ye(r,o){if(r&1&&(t(0,"li",39),i(1),e()),r&2){let s=o.$implicit;a(),B(" ",s.name," ")}}var Ve=(()=>{let o=class o{constructor(m,l,n){this.firestoreS=m,this.formBuilder=l,this.authS=n,this.p=1,this.pageTwo=1,this.arrEspecialistas=[],this.arrPacientes=[],this.savedFileNames=[],this.storage=R(ie),this.formRegistro=new H({nombre:new x("",[d.required,d.pattern("[a-zA-Z ]*")]),apellido:new x("",[d.required,d.pattern("[a-zA-Z ]*")]),edad:new x("",[d.required,d.pattern("[0-9]*"),d.min(18),d.max(99)]),dni:new x("",[d.required,d.minLength(8),d.maxLength(8)]),email:new x("",[d.required,d.pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}")]),password:new x("",[d.required]),imagenes:this.formBuilder.array([])})}ngOnInit(){this.firestoreS.obtenerFirestoreTodosProfesional().subscribe(m=>{this.arrEspecialistas=[],m.forEach(l=>{this.arrEspecialistas.push(l)})}),this.firestoreS.obtenerFirestoreTodosPacientes().subscribe(m=>{this.arrPacientes=[],m.forEach(l=>{this.arrPacientes.push(l)})})}autorizarProfesional(m){this.firestoreS.autorizarProfesional(m)}submit(){return C(this,null,function*(){let m=this.formRegistro.get("imagenes"),l=[],n=this.formRegistro.value.nombre,p=this.formRegistro.value.email,c=this.formRegistro.value.password;for(let f of m.controls)if(f.value!==""){let v=re(this.storage,`imagenes/${f.value.name}`);yield oe(v,f.value).then(S=>C(this,null,function*(){l.push(yield ne(S.ref)),this.firestoreS.agregarFirestoreAdministrador(this.formRegistro,l).then(Ce=>{n&&p&&c&&this.authS.crearUsuarioAdmin(p,c,l[0],n).then(we=>{this.formRegistro.reset(),this.savedFileNames=[],de.default.fire({title:"Registro exitoso",text:"Se ha registrado correctamente",icon:"success",confirmButtonText:"Aceptar"})})})}))}})}onFileChange(m){let l=m.target.files;if(l&&l.length>0){let n=this.formRegistro.get("imagenes");n.clear();let p=l[0];this.savedFileNames=[{name:p.name}],n.push(this.formBuilder.control(p))}}};o.\u0275fac=function(l){return new(l||o)(E(U),E(X),E(ee))},o.\u0275cmp=I({type:o,selectors:[["app-administracion"]],standalone:!0,features:[j],decls:85,vars:20,consts:[[1,"full-background"],[1,"d-flex","flex-row","justify-content-center","align-items-center"],[1,"d-flex","flex-column","justify-content-center","align-items-center","panelusuarios"],[2,"border","1px solid black","padding","0 120px","box-shadow","0 4px 8px 5px rgba(0, 0, 0, 0.281)"],[1,"table","mt-3","table-light"],["scope","col"],[4,"ngFor","ngForOf"],["id","tableOne",3,"pageChange"],[1,"table","mt-3","me-5",2,"height","150px","width","100px"],[3,"click",4,"ngFor","ngForOf"],["id","tableTwo",3,"pageChange"],[1,"card","p-4","shadow","mt-3",2,"width","30rem"],[1,"text-center","mb-4","mt-1"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"ms-3","card","p-4","shadow"],["for","imagenes",1,"form-label"],["type","file","id","imagenes","accept","image/*","multiple","","formControlName","imagenes",1,"form-control",3,"change"],[1,"saved-files"],["class","text-success",4,"ngFor","ngForOf"],["scope","row"],["alt","...",2,"height","50px","width","50px",3,"src"],[3,"click"],[3,"ngClass"],[1,"text-danger"],[1,"text-success"]],template:function(l,n){if(l&1&&(t(0,"div",0),g(1,"app-navbar"),t(2,"div",1)(3,"div",2)(4,"h1",3),i(5," Panel Usuarios "),e(),t(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),i(10,"#"),e(),t(11,"th",5),i(12,"Foto"),e(),t(13,"th",5),i(14,"Nombre"),e(),t(15,"th",5),i(16,"Apellido"),e(),t(17,"th",5),i(18,"Obra social"),e()()(),b(19,he,12,5,"tbody",6),y(20,"paginate"),e(),t(21,"pagination-controls",7),_("pageChange",function(c){return n.p=c}),e(),t(22,"table",8)(23,"thead")(24,"tr")(25,"th",5),i(26,"#"),e(),t(27,"th",5),i(28,"Foto"),e(),t(29,"th",5),i(30,"Nombre"),e(),t(31,"th",5),i(32,"Apellido"),e(),t(33,"th",5),i(34,"Especialidad"),e(),t(35,"th",5),i(36,"Aprobado"),e()()(),b(37,be,15,9,"tbody",9),y(38,"paginate"),e(),t(39,"pagination-controls",10),_("pageChange",function(c){return n.pageTwo=c}),e()(),t(40,"div",11)(41,"h2",12),i(42,"Formulario de Administrador"),e(),t(43,"form",13),_("ngSubmit",function(){return n.submit()}),t(44,"div",14)(45,"label",15),i(46,"Nombre:"),e(),g(47,"input",16),b(48,ve,2,0,"div",17),e(),t(49,"div",14)(50,"label",15),i(51,"Apellido:"),e(),g(52,"input",18),b(53,xe,2,0,"div",17),e(),t(54,"div",14)(55,"label",19),i(56,"Edad:"),e(),g(57,"input",20),b(58,_e,2,0,"div",17),e(),t(59,"div",14)(60,"label",21),i(61,"DNI:"),e(),g(62,"input",22),b(63,Se,2,0,"div",17),e(),t(64,"div",14)(65,"label",23),i(66,"Email"),e(),g(67,"input",24),e(),b(68,Ee,2,0,"div",17),t(69,"div",14)(70,"label",25),i(71,"Contrase\xF1a"),e(),g(72,"input",26),e(),t(73,"div",27)(74,"button",28),i(75," Guardar datos "),e()()()(),t(76,"div",29)(77,"label",30),i(78,"Imagenes"),e(),t(79,"input",31),_("change",function(c){return n.onFileChange(c)}),e(),t(80,"div",32)(81,"h5"),i(82,"Archivos cargados:"),e(),t(83,"ul"),b(84,ye,2,1,"li",33),e()()()()()),l&2){let p,c,f,v,S;a(19),u("ngForOf",N(20,10,n.arrPacientes,A(16,fe,n.p))),a(18),u("ngForOf",N(38,13,n.arrEspecialistas,A(18,ge,n.pageTwo))),a(6),u("formGroup",n.formRegistro),a(5),u("ngIf",n.formRegistro==null||(p=n.formRegistro.get("nombre"))==null||p.errors==null?null:p.errors.pattern),a(5),u("ngIf",n.formRegistro==null||(c=n.formRegistro.get("apellido"))==null||c.errors==null?null:c.errors.pattern),a(5),u("ngIf",(n.formRegistro==null||(f=n.formRegistro.get("edad"))==null||f.errors==null?null:f.errors.min)||(n.formRegistro==null||(f=n.formRegistro.get("edad"))==null||f.errors==null?null:f.errors.max)),a(5),u("ngIf",((v=n.formRegistro.get("dni"))==null||v.errors==null?null:v.errors.minlength)||((v=n.formRegistro.get("dni"))==null||v.errors==null?null:v.errors.maxlength)),a(5),u("ngIf",n.formRegistro==null||(S=n.formRegistro.get("email"))==null||S.errors==null?null:S.errors.pattern),a(6),u("disabled",!(n.formRegistro!=null&&n.formRegistro.valid)||!n.savedFileNames.length),a(10),u("ngForOf",n.savedFileNames)}},dependencies:[te,G,M,V,q,Y,J,Z,K,$,L,Q,W,se,me,ae,le],styles:[".full-background[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;width:100%}[_nghost-%COMP%]{display:block;background-image:url(/assets/pattern.jpg)}.panelusuarios[_ngcontent-%COMP%]{background-color:#8ecae6;padding:10px;border-radius:10px;margin:10px;width:850px;box-shadow:4px 8px 5px #0003;height:750px}"]});let r=o;return r})();export{Ve as AdministracionComponent};
